/* jQuery.BetterGrow v 1.0 http://tpgblog.com/bettergrow/
compiled by http://yui.2clics.net/ */
(function($){$.fn.BetterGrow=function(options){var curr_this;var c_settings;if((typeof options=="object")||(options==undefined)){c_settings=$.extend({},$.fn.BetterGrow.settings,options);return this.each(function(){var $this=$(this);if($this.parent("div").length==0){$this.wrap('<div style="border:0; padding:0; margin:0"></div>');}set_height($this,c_settings.initial_height);make_better($this,c_settings);$this.keydown();});}return this;};$.fn.BetterGrow.settings={initial_height:26,max_height:null,on_enter:null,do_not_enter:true};function set_height(the_object,min_height){the_object.height(min_height);}function make_better(the_object,settings){var min_height=settings.initial_height;var max_height=settings.max_height;the_object.parent().css("height","auto");the_object.css("overflow","hidden");the_object.unbind("keydown");the_object.unbind("keyup");the_object.keydown(function(e){textarea_grow_some(the_object,min_height,max_height);if(e.keyCode==13){if(settings.on_enter!=null){settings.on_enter();if(settings.do_not_enter){e.preventDefault();e.stopImmediatePropagation();}}}});the_object.keyup(function(){textarea_grow_some(the_object,min_height,max_height);});}function textarea_grow_some(obj,min_height,max_height){var curr_height,curr_scroll_height;if(!textarea_grow_some.browser_calc){textarea_grow_some.browser_calc=$.browser.msie||$.browser.safari;textarea_grow_some.padding_calc=textarea_grow_some.browser_calc?(parseInt(obj.css("padding-top"))+parseInt(obj.css("padding-bottom"))):0;}curr_height=obj.height();if(curr_height>min_height){obj.parent().css("height",obj.height()+"px");obj.height(0);}curr_scroll_height=obj.get(0).scrollHeight-textarea_grow_some.padding_calc;if(max_height&&(curr_scroll_height>max_height)){obj.height(max_height).css("overflow","auto");}else{if(curr_scroll_height>min_height){obj.css("overflow","hidden").height(curr_scroll_height);}else{if(curr_height>min_height){obj.css("overflow","hidden").height(min_height);}}}obj.parent().css("height","auto");}})(jQuery);
